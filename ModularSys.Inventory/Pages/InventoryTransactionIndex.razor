@page "/inventory-transactions"
@using MudBlazor
@using ModularSys.Inventory.Interface
@using ModularSys.Data.Common.Entities.Inventory
@inject IInventoryService InventoryService

<MudContainer MaxWidth="MaxWidth.False" Class="pa-4">
    <MudStack Row="true" AlignItems="AlignItems.Center" Justify="Justify.SpaceBetween">
        <MudText Typo="Typo.h6">Inventory Transactions</MudText>
    </MudStack>

    <MudTable Items="@_transactions"
              Hover="true"
              Dense="true"
              Bordered="true"
              Striped="true"
              Class="w-100">

        <HeaderContent>
            <MudTh>Product ID</MudTh>
            <MudTh>Change</MudTh>
            <MudTh>Amount</MudTh>
            <MudTh>Type</MudTh>
            <MudTh>Date</MudTh>
        </HeaderContent>

        <RowTemplate>
            <MudTd>@context.ProductId</MudTd>
            <MudTd>@context.QuantityChange</MudTd>
            <MudTd>@context.Amount.ToString("â‚±#,##0.00")</MudTd>
            <MudTd>@context.TransactionType</MudTd>
            <MudTd>@context.TransactionDate.ToString("MMM dd, yyyy HH:mm")</MudTd>
        </RowTemplate>

        <NoRecordsContent>
            <MudText Color="Color.Secondary">No transactions found.</MudText>
        </NoRecordsContent>
    </MudTable>
</MudContainer>

@code {
    private List<InventoryTransaction> _transactions = new();

    protected override async Task OnInitializedAsync()
    {
        _transactions = (await InventoryService.GetAllAsync()).ToList();
    }
}
